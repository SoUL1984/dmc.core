## CRUD для ведения таблицы PriceGroup и Price

- [X] (C) Создание группы для прайслиста
- [X] (R) Получить все группы для прайлиста
- [X] (U) Изменение данных группы для прайслиста
- [X] (D) Удаление группы для прайслиста с всеми позициями из прайслиста
- [X] Получить все группы и позиции для прайс-листа

- [X] (C) Создание позиции в прайлисте для определенной группы
- [X] (R) Получить данные прайса из определенной группы прайслиста
- [X] (U) Изменение данных прайслиста
- [X] (D) Удаление позиции в прайслисте

- [X] [Коллекция для работы с end points для Postman v2.0](../dmc.core.postman_collection_21112021.json)

#### (C) Создание группы для прайслиста

```
ROLES (admin)

POST: http://localhost:5000/price-group/create
{
    "pricegroup_name": "Цирконий",
    "pricegroup_desc": "Содержит основные позиции циркониевых работ"
}
```

Выходными данными являются id вновь созданной записи.

Пример выходных данных endpoint создании группы для прайслиста:

```
{
    "id": 1,
    "pricegroup_name": "Цирконий",
    "pricegroup_desc": "Содержит основные позиции циркониевых работ",
    "isDelete: false
}
```

#### (R) Получить все группы для прайлиста

```
ROLES (all)

GET: http://localhost:5000/price-group
```

Данных для отправки в этом запросе нет. Мы сможем получить от системы положительный ответ, только если пользователь авторизован и имеет token.

Пример выходных данных endpoint "Получить все группы для прайлиста":

```
[
    {
        "id": 1,
        "name": "Цирконий",
        "desc": "Содержит основные позиции циркониевых работ",
        "isDelete": false
    },
    {
        "id": 2,
        "name": "Титан",
        "desc": "Содержит основные позиции титановых работ"
        "isDelete": false
    }
]
```

#### (U) Изменение данных группы для прайслиста

```
ROLES (admin)

PATCH: http://localhost:5000/price-group/1

```

В качестве входящих данных через url передается индентификатор изменяемой записи.

Удаленная ранее запись не может быть отредактирована.

Если данные группы прайслиста изменены успешно, то в базе данных в таблице группы прайслиста меняются те данные, которые мы передали для изменения, а также меняется запись updateAt.

```
{
    "name": "Циркониевые абатменты",
    "desc": "Содержит основные позиции циркониевых работ"
}
```

В качестве выходных данных система выдает 1 или 0 (если запись была изменена то 1, если по какой-то причине изменить не удалось то 0).

Изменить запись может только авторизованный пользователь с правами администратора.

Пример выходных данных endpoint "Изменение данных группы для прайслиста":

```
1
```

#### (D) Удаление группы для прайслиста с всеми позициями из прайслиста

```
ROLES (admin)

DELETE: http://localhost:5000/price-group/1
```

В качестве входящих данных через url передается индентификатор записи которую необходимо удалить.

Если запись удалена успешно, то в базе данных в таблице прайс-лист мы ставим isDelete = true, а также отмечаем дату удаления записи deletedAt.
В подчиненной таблице прайс также удаляются записи, которые принадлежат этой группе, путем изменения поля на isDelete = true, а также изменения даты удаления.

В качестве выходных данных система выдает 1 или 0 (если строка была удалена то 1, если по какой-то причине удалить не удалось то 0).

Удалить может только авторизованный пользователь с правами администратора.

Пример выходных данных endpoint "Удаление группы для прайслиста":

```
0
```

#### Получить все группы и позиции для прайс-листа

```
ROLES (all)

GET: http://localhost:5000/price-group/all-pricegroup-and-price
```

Данных для отправки в этом запросе нет. Мы сможем получить от системы положительный ответ, только если пользователь авторизован и имеет token.

Пример выходных данных endpoint "Получить все группы для прайлиста":

```
{
    {    
        "id": 1,
        "pricegroup_name": "Цирконий",
        "pricegroup_desc": "Содержит основные позиции циркониевых работ",
        "isDelete":false
    }
    [
        {
            "id": 1,
            "name": "Циркониевый абатмент",
            "price": 1200,00
            "desc": "Содержит основные позиции циркониевых работ",
            "isDeleted": false
        },
        {
            "id": 1,
            "name": "Циркониевый абатмент",
            "price": 1200,00
            "desc": "Содержит основные позиции циркониевых работ",
            "isDeleted": false
        }
    ]
    {    
        "id": 2,
        "pricegroup_name": "Титан",
        "pricegroup_desc": "Содержит основные позиции циркониевых работ",
        "isDelete":false
    }
    [
        {
            "id": 1,
            "name": "титановый абатмент абатмент",
            "price": 1200,00
            "desc": "Содержит основные позиции циркониевых работ",
            "isDeleted": false
        },
        {
            "id": 1,
            "name": "опора титановая",
            "price": 1200,00
            "desc": "Содержит основные позиции циркониевых работ",
            "isDeleted": false
        }
    ]
}
```

### Прайслист

#### (C) Создание позиции в прайслисте

```
ROLES (admin)

POST: http://localhost:5000/price/create
{
    "pricegroupId":2,
    "name": "Циркониевый абатмент",
    "price": 1200,00
    "desc": "Содержит основные позиции циркониевых работ",
    "isDeleted": false
}
```

Выходными данными являются id вновь созданной записи.

Пример выходных данных endpoint создания позиции в прайслиста:

```
{
    "id": 1,
    "pricegroupId":2,
    "name": "Циркониевый абатмент",
    "price": 1200,00
    "desc": "Содержит основные позиции циркониевых работ",
    "isDeleted": false
}
```

#### (R) Получить все группы и позиции прайлиста

```
ROLES (all)

GET: http://localhost:5000/price
```

Данных для отправки в этом запросе нет.

Пример выходных данных endpoint "Получить все группы и позиции прайлиста":

```
[
    {
        "id": 1,
        "pricegroupId":1,
        "name": "Циркониевый абатмент",
        "price": 1200,00
        "desc": "Содержит основные позиции циркониевых работ",
        "isDeleted": false
    },
    {
        "id": 1,
        "pricegroupId":1,
        "name": "Циркониевый абатмент",
        "price": 1200,00
        "desc": "Содержит основные позиции циркониевых работ",
        "isDeleted": false
    }
    {
        "id": 1,
        "pricegroupId":2,
        "name": "титановый абатмент абатмент",
        "price": 1200,00        "pricegroupId":1,
        "desc": "Содержит основные позиции циркониевых работ",
        "isDeleted": false
    },
    {
        "id": 1,
        "pricegroupId":2,
        "name": "опора титановая",
        "price": 1200,00
        "desc": "Содержит основные позиции циркониевых работ",
        "isDeleted": false
    }
]
```

#### (U) Изменение данных прайс-листа

```
ROLES (admin)

PATCH: http://localhost:5000/price/1

```

В качестве входящих данных через url передается индентификатор изменяемой записи.

Удаленная ранее запись не может быть отредактирована.

Если данные прайслиста изменены успешно, то в базе данных в таблице прайслиста меняются те данные, которые мы передали для изменения, а также меняется запись updateAt.

```
{
    "pricegroupId":2,
    "name": "Циркониевый абатмент",
    "price": 1200,00
    "desc": "Содержит основные позиции циркониевых работ",
    "isDeleted": false
}
```

В качестве выходных данных система выдает 1 или 0 (если запись была изменена то 1, если по какой-то причине изменить не удалось то 0).

Изменить запись может только авторизованный пользователь с правами администратора.

Пример выходных данных endpoint "Изменение данных группы для прайслиста":

```
1
```

#### (D) Удаление группы для прайслиста с всеми позициями из прайслиста

```
ROLES (admin)

DELETE: http://localhost:5000/price/1
```

В качестве входящих данных через url передается индентификатор записи которую необходимо удалить.

Если запись удалена успешно, то в базе данных в таблице прайс-лист мы ставим isDelete = true, а также отмечаем дату удаления записи deletedAt.
В подчиненной таблице прайс также удаляются записи, которые принадлежат этой группе, путем изменения поля на isDelete = true, а также изменения даты удаления.

В качестве выходных данных система выдает 1 или 0 (если строка была удалена то 1, если по какой-то причине удалить не удалось то 0).

Удалить может только авторизованный пользователь с правами администратора.

Пример выходных данных endpoint "Удаление группы для прайслиста":

```
0
```
